#+title: ThePirateBay
ThePirateBay is a NixOS configuration tailored for this specific hardware:
- GA-Z170MX-Gaming 5
- Intel(R) Core(TM) i7-6700K
- GPU: N/A
- Samsung SSD 850 EVO 250GB (Two seperate drives)

* File Tree
#+begin_src
├── homes
│   └── x86_64-linux
│       ├── trong@ThePirateBay
├── modules
│   └── nixos
│       ├── desktops
│       │   ├── hyprland
│       │   └── sleepy-dwm
│       ├── oceanic
│       │   ├── audio
│       │   ├── theme
│       │   └── utils
│       ├── suites
│       │   ├── common
│       │   └── gaming
│       └── users
│           └── trong
└── systems
    ├── x86_64-install-iso
    │   └── minimal
    └── x86_64-linux
        └── ThePirateBay
            └── backgrounds
#+end_src
* Source
=Hardware.nix=
Declares hardware-specific options & handels kernel management.
#+begin_src nix
{
  config,
  lib,
  pkgs,
  modulesPath,
  ...
}:

{
  imports = [ (modulesPath + "/installer/scan/not-detected.nix") ];

  boot = {
    kernelPackages = pkgs.linuxPackages_zen;
    kernelModules = [ "kvm-intel" ];
    extraModulePackages = [ ];

    initrd = {
      availableKernelModules = [
        "xhci_pci"
        "ahci"
        "usb_storage"
        "usbhid"
        "sd_mod"
      ];
      kernelModules = [ ];
    };
  };

  # NixOS Root SSD
  fileSystems."/" =
    { device = "/dev/disk/by-uuid/9946d37c-1ce5-4666-aa13-895154a86533";
      fsType = "ext4";
    };

  # SSDTwo
  fileSystems."/drive/ssdtwo" =
    { device = "/dev/disk/by-uuid/0bc7cf14-fefa-4506-9661-929cc16cd3e0";
      fsType = "ext4";
    };

  swapDevices =
    [ { device = "/dev/disk/by-uuid/718d892b-51fb-40a2-842f-eed9cb4dbdb3"; }
    ];

  networking.useDHCP = lib.mkDefault true;

  nixpkgs.hostPlatform = lib.mkDefault "x86_64-linux";
  hardware.cpu.intel.updateMicrocode = lib.mkDefault config.hardware.enableRedistributableFirmware;
}
#+end_src

=ThePirateBay: default.nix=
Configuration of the Oceanic desktop.
ThePirateBay is the host system that inherits all of the 'Oceanic' modules.
#+begin_src nix
{
  inputs,
  config,
  pkgs,
  lib,
  ...
}:

{
  imports = [ ./hardware.nix ];

  # NixOS boot options
  boot.loader.grub = {
    enable = true;
    device = "/dev/sda";
    useOSProber = true;
    theme = inputs.grub-themes.packages.${pkgs.system}.hyperfluent;
  };

  # Desktop hostname
  networking.hostName = "ThePirateBay";

  # Create user "trong" & set default shell
  users = {
    trong.create = true;
    users.trong.shell = pkgs.zsh;
  };

  # Set OS shell to Zsh
  programs.zsh.enable = true;

  # Nix options
  nix = {
    gc = { # Automatic garbage collection
      automatic = true;
      dates = "weekly";
      options = "--delete-older-than 7d";
    };
  };

  # Different suites for different needs
  suites = {
    common.enable = true; # Enables the common desktop properties
    gaming.enable = true; # Gaming options
  };

  # Enables the Oceanic desktop modules
  oceanic = {
    utils.enable = true;
    audio.enable = true;
    theme.enable = true;
  };

  # SDDM prerequisite
  environment.systemPackages = [(
    pkgs.catppuccin-sddm.override {
      flavor = "mocha";
      font  = "Comic Mono";
      fontSize = "12";
      background = "${./backgrounds/jpn-house.jpg}";
      loginBackground = true;
    }
  )];

  # Desktop environment
  services = {
    xserver = {
      enable = true;
      updateDbusEnvironment = true;
      videoDrivers = [ "intel-media-driver" ];
      xkb = {
        layout = "us";
        variant = "";
      };
    };

    displayManager.sddm = {
      enable = true;
      wayland.enable = true;

      theme = "catppuccin-mocha";
      package = pkgs.kdePackages.sddm;
    };
  };

  desktops = {
    hyprland.enable = true;
    sleepy-dwm.enable = true;
    xmonad.enable = false;
    cosmic.enable = false;
    awesome.enable = false;
  };

  system.stateVersion = "24.05";
}
#+end_src
